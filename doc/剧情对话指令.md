# 剧情对话指令

## 1 简介
剧情对话指令是剧情文本里使用的指令，该指令的设计是为了能更好的进行剧情编写以及在剧情文本中穿插命令。

## 2 基本格式
一条剧情指令的格式如下：

`指令名*参数一#参数二#参数三......`

而对话指令的指令名为 `Say` 与 ` `(空)
即可以省略不写，如

`Say*主角#你好。`

与

`*主角#你好。`

与

`主角#你好。`

这种写法是等价的。

## 3 指令查询表
**注：** 使用[&expression&]可以执行脚本并将返回值嵌入指令，请参考 [**运行时脚本**](运行时脚本.md)

|指令|说明|
|-|-|
|**Say<br/>(或空指令)**|Say\*对话者#对话内容<br/><br/>Say*主角#你好<br/>\*主角#你好<br>主角#你好<br/><br/>对话指令，用于显示一条对话。<br/>参数一：对话者，通过在剧情文件的`character`项里指定，或使用`SetChar`指令指定。<br/>参数二：对话内容，对话内容里的#号不会影响对话内容显示。|
|**SetChar**|SetChar\*对话者#设置值<br/><br/>SetChar\*主角#1<br>SetChar\*目标#[&roleBindID&]<br/><br/>设置对话者对应ID<br/>参数一：对话者，设置的对话者将储存在全局的临时对话者字典里，可以跨剧情调用，但是重启游戏后将会丢失。<br/>参数二：设置值，对话者对应的角色ID|
|Event|Event\*目标事件#跳转条件（可省略，或为true时跳转）<br/><br/>Event\*事件一<br/>Event\*事件一#[&roleBindID==609&]<br/><br/>当条件满足时，结束当前事件并跳转到指定事件。<br/><br/>参数一：目标事件<br/>参数二：跳转条件，可省略，当为空或为true时进行跳转。|
|**SetInt**|SetInt\*键#值<br/><br/>SetInt\*数值1#10<br/>SetInt*数值1#[&GetInt("数值1") * 2&]<br/><br/>储存一个整形键值，该键值将储存于游戏存档里。<br/>取出值使用`GetInt(key)`进行取值。|
|**ChangeInt**|ChangeInt\*键#变化值<br/><br/>ChangeInt\*数值1#10<br/>ChangeInt*数值1#[&GetInt("数值1") * 2&]<br/><br/>修改储存的键值，该数值将在原数值上进行变动。|
|**SetStr**|SetStr\*键#值<br/><br/>SetStr\*字符串1#你好<br/>SetStr*字符串1#[&GetStr("数值1")&][&GetStr("数值1")&]<br/><br/>储存一个字符串键值，该键值将储存于游戏存档里。<br/>取出值使用`GetStr(key)`进行取值。|
|**AddTime**|AddTime\*年#月#日<br/><br/>AddTime\*10#0#0<br/><br/>使时间跳过对应的年月日。|
|**ChangeHp**|ChangeHp\*血量变化量<br/><br/>ChangeHp\*1000<br/>ChangeHp\*-500<br/><br/>修改主角血量。|
|**ChangeExp**|ChangeExp\*修为变化量<br/><br/>ChangeExp\*1000<br/>ChangeExp\*-500<br/><br/>修改主角修为。
|AddItem|AddItem\*物品ID#添加数量#是否显示提示（0不显示，1显示）<br/><br/>AddItem\*101#1#1<br/><br/>为主角添加物品。|